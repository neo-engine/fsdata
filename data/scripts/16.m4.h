// Init pkmn / rescue birch script
#include "scriptlib.m4.h"

SET_FLAG( 16, 0 )
PLAY_MUSIC( BGM_HELP_PROF_BIRCH )
GET_MAPOBJECT( 20, 13, 3 ) // birch
COPY_REGISTER( 0, 2 )
GET_MAPOBJECT( 21, 13, 3 ) // zigzag
COPY_REGISTER( 0, 1 )
EXCLAMATION_R( 2 ) // Show exclamation mark
MOVE_MAPOBJECT_FAST_R( 1, LEFT, 1 )
MOVE_MAPOBJECT_FAST_R( 1, RIGHT, 1 )
MOVE_MAPOBJECT_FAST_R( 1, LEFT, 0 )
MESSAGE( 76, 0 )
MOVE_PLAYER( UP, 3 )
MOVE_PLAYER( LEFT, 4 )
MOVE_MAPOBJECT_FAST_R( 1, LEFT, 1 )
MOVE_MAPOBJECT_FAST_R( 1, RIGHT, 1 )
MOVE_MAPOBJECT_FAST_R( 1, LEFT, 0 )
EXCLAMATION_R( 2 ) // Show exclamation mark
MESSAGE( 77, 0 )
MOVE_PLAYER( UP, 0 )
INIT_PKMN
MOVE_PLAYER( LEFT, 1 )
SET_FLAG( 15, 1 )
BATTLE_PKMN( PKMN_ZIGZAGOON, 3 )
HEAL_TEAM
RESTORE_MUSIC
REDRAW_OBJECTS
GET_MAPOBJECT( 20, 13, 3 ) // birch
COPY_REGISTER( 0, 1 )
MOVE_MAPOBJECT_R( 1, RIGHT, 1 )
MESSAGE( 78, 0 )

SET_FLAG( 17, 1 )
SET_FLAG( 13, 1 )
MOVE_PLAYER( UP, 0 )
WARP_CROSSBANK( 21, 0x30, 0x70, 3 )
MESSAGE( 79, 0 )
PLAY_SOUND_EFFECT( SFX_OBTAIN_ITEM )
MESSAGE( 80, 1 )
// TODO: add nick name
// YES_NO_MESSAGE( 81, 1 )
MESSAGE( 82, 0 )
YES_NO_MESSAGE( 113, 0, 3 )
    YES_NO_MESSAGE( 83, 0, 1 )
    REWIND( 3 )
MESSAGE( 84, 0 )
END_OF_PROGRAM
